<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Список задач</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
<div class="container">
    <h1>Список задач</h1>

    <div class="recent-tasks">
        <!-- Используем th:each для отображения списка обращений -->
        <div th:each="task : ${recentTasks}">
            <a th:href="@{/task/{id}(id=${task.id})}" class="task-item">
                <!-- Название задачи -->
                <div class="task-title" th:text="${task.title}"></div>
                <!-- Информация о задаче с использованием статуса и даты -->
                <div class="task-info" th:class="'status-' + ${task.status.toLowerCase()}">
                        <span>
                            <div class="status-icon"></div>
                            <!-- Форматируем дату создания -->
                            Дата: <span th:text="${#temporals.format(task.createdAt, 'dd.MM.yyyy')}"></span>
                        </span>
                    <span>
                            <div class="status-icon"></div>
                        <!-- Отображение статуса задачи -->
                            Статус: <span th:text="${task.status}"></span>
                        </span>
                    <span>
                            <!-- Отображение исполнителя задачи -->
                            Исполнитель: <span th:text="${task.assignee}"></span>
                        </span>
                </div>
            </a>
        </div>
    </div>

    <!-- Пагинация -->
    <div class="pagination">
        <a th:href="@{/tasks_page(page=${currentPage - 1})}" th:if="${currentPage > 1}">Предыдущая</a>

        <span th:each="i : ${#numbers.sequence(1, totalPages)}"
              th:classappend="${i == currentPage} ? 'current-page'">
                <a th:href="@{/tasks_page(page=${i})}" th:text="${i}"></a>
            </span>

        <a th:href="@{/tasks_page(page=${currentPage + 1})}" th:if="${currentPage < totalPages}">Следующая</a>
    </div>
</div>
</body>
</html>
